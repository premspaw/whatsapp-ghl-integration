<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Synthcore WhatsApp AI</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="css/dashboard.css">
</head>

<body>
    <!-- Header -->
    <header class="ghl-header">
        <div class="header-left">
            <h1>
                <div class="whatsapp-icon">ğŸ’¬</div>
                WhatsApp AI
            </h1>
        </div>
        <div class="header-actions">
            <button class="header-btn" id="refreshBtn" title="Refresh">ğŸ”„</button>
            <button class="header-btn" id="templatesBtn" title="Templates">ğŸ“‹</button>
            <button class="header-btn" id="settingsBtn" title="Settings">âš™ï¸</button>
            <button class="header-btn" id="switchNumberBtn" title="Switch Number">ğŸ”</button>
            <span id="connectionBadge" style="margin-left:8px;padding:4px 8px;border-radius:999px;font-size:12px;font-weight:600;background:#eee;color:#333;">Disconnected</span>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <input type="text" class="search-box" id="searchBox" placeholder="Search conversations...">
            </div>

            <div class="filter-section">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="unread">Unread</button>
                <button class="filter-btn" data-filter="read">Read</button>
            </div>

            <div class="conversation-list" id="conversationList">
                <!-- Conversations will be injected here -->
                <div class="loading" style="padding: 2rem; text-align: center; color: #94a3b8;">
                    Loading...
                </div>
            </div>

            <div class="sidebar-footer"
                style="padding: 1rem; border-top: 1px solid #e2e8f0; font-size: 0.8rem; color: #94a3b8; text-align: center;">
                <span id="totalConversations">0</span> conversations â€¢ <span id="activeToday">0</span> active
            </div>
        </aside>

        <!-- Chat Area -->
        <main class="chat-area">
            <!-- Connection Status -->
            <div id="connectionStatus" class="connection-status disconnected">
                Connecting...
            </div>

            <!-- Chat Header -->
            <div class="chat-header" id="chatHeader" style="display: none;">
                <div class="chat-contact">
                    <div class="contact-avatar" id="chatAvatar">?</div>
                    <div class="chat-info">
                        <h3 id="chatContactName">Select a contact</h3>
                        <p id="chatContactPhone">...</p>
                    </div>
                </div>
            </div>

            <!-- Messages -->
            <div class="messages-area" id="messagesArea">
                <div class="empty-state" id="emptyState">
                    <div id="qrInline" style="display:none;margin-top:12px;background:#fff;border:1px solid #eee;border-radius:12px;padding:16px;max-width:420px">
                        <p id="qrInlineStatus" style="margin:0 0 10px;color:#555;font-size:14px">Scan this QR with WhatsApp to connect</p>
                        <input id="locationInput" type="text" placeholder="GHL Location ID (optional)" style="width:100%;padding:8px 10px;border:1px solid #ddd;border-radius:8px;margin-bottom:10px;font-size:14px" />
                        <img id="qrImageInline" alt="WhatsApp QR" style="width:300px;height:300px;object-fit:contain;border:1px solid #eee;border-radius:8px;margin-bottom:12px" />
                        <div style="display:flex;gap:10px;justify-content:flex-start">
                            <button id="qrInlineConnect" class="header-btn" style="font-size:0.95rem">Connect</button>
                            <button id="qrInlineRefresh" class="header-btn" style="font-size:0.95rem">Refresh QR</button>
                        </div>
                    </div>
                    <div id="connectedInfo" style="display:none;margin-top:12px;background:#fff;border:1px solid #eee;border-radius:12px;padding:16px;max-width:420px">
                        <p style="margin:0 0 8px;color:#111;font-weight:600">WhatsApp AI is active</p>
                        <p style="margin:0 0 10px;color:#555;font-size:14px">Your AI agent can:
                        <br>â€¢ Auto-reply with your latest templates
                        <br>â€¢ Use knowledge base answers
                        <br>â€¢ Log chats to GHL conversations</p>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="message-input-area" id="messageInputArea" style="display: none; position: relative;">
                <div class="input-actions">
                    <button id="emojiBtn" title="Emoji">ğŸ˜Š</button>
                    <button id="templateSendBtn" title="Send Template">ğŸ“</button>
                    <button id="attachBtn" title="Attach File">ğŸ“</button>
                    <input type="file" id="fileInput" style="display: none;" accept="image/*,video/*,application/pdf">
                </div>
                <textarea class="message-input" id="messageInput" placeholder="Type a message..." rows="1"></textarea>
                <button class="send-button" id="sendButton">â¤</button>

                <!-- Emoji Picker -->
                <div id="emojiPicker" class="emoji-picker" style="display: none;">
                    <div class="emoji-grid">
                        ğŸ˜€ ğŸ˜ƒ ğŸ˜„ ğŸ˜ ğŸ˜† ğŸ˜… ğŸ˜‚ ğŸ¤£ ğŸ˜Š ğŸ˜‡ ğŸ™‚ ğŸ™ƒ ğŸ˜‰ ğŸ˜Œ ğŸ˜ ğŸ¥° ğŸ˜˜ ğŸ˜— ğŸ˜™ ğŸ˜š
                        ğŸ˜‹ ğŸ˜› ğŸ˜ ğŸ˜œ ğŸ¤ª ğŸ¤¨ ğŸ§ ğŸ¤“ ğŸ˜ ğŸ¤© ğŸ¥³ ğŸ˜ ğŸ˜’ ğŸ˜ ğŸ˜” ğŸ˜Ÿ ğŸ˜• ğŸ™ â˜¹ï¸ ğŸ˜£
                        ğŸ˜– ğŸ˜« ğŸ˜© ğŸ¥º ğŸ˜¢ ğŸ˜­ ğŸ˜¤ ğŸ˜  ğŸ˜¡ ğŸ¤¬ ğŸ¤¯ ğŸ˜³ ğŸ¥µ ğŸ¥¶ ğŸ˜± ğŸ˜¨ ğŸ˜° ğŸ˜¥ ğŸ˜“ ğŸ¤—
                        ğŸ¤” ğŸ¤­ ğŸ¤« ğŸ¤¥ ğŸ˜¶ ğŸ˜ ğŸ˜‘ ğŸ˜¬ ğŸ™„ ğŸ˜¯ ğŸ˜¦ ğŸ˜§ ğŸ˜® ğŸ˜² ğŸ¥± ğŸ˜´ ğŸ¤¤ ğŸ˜ª ğŸ˜µ ğŸ¤
                        ğŸ‘ ğŸ‘ ğŸ‘Œ âœŒï¸ ğŸ¤ ğŸ¤Ÿ ğŸ¤˜ ğŸ¤™ ğŸ‘ˆ ğŸ‘‰ ğŸ‘† ğŸ‘‡ â˜ï¸ âœ‹ ğŸ¤š ğŸ– ğŸ–– ğŸ‘‹ ğŸ¤ ğŸ’ª
                        ğŸ™ âœï¸ ğŸ’… ğŸ¤³ ğŸ’ƒ ğŸ•º ğŸ‘¯ ğŸ§˜ ğŸ›€ ğŸ›Œ ğŸ•´ ğŸ—£ ğŸ‘¤ ğŸ‘¥ ğŸ«‚ ğŸ‘£ ğŸ¦´ ğŸ¦· ğŸ‘€
                        â¤ï¸ ğŸ§¡ ğŸ’› ğŸ’š ğŸ’™ ğŸ’œ ğŸ–¤ ğŸ¤ ğŸ¤ ğŸ’” â£ï¸ ğŸ’• ğŸ’ ğŸ’“ ğŸ’— ğŸ’– ğŸ’˜ ğŸ’ ğŸ’Ÿ
                        âœ… âŒ â­ ğŸ‰ ğŸŠ ğŸ ğŸˆ ğŸ‚ ğŸ€ ğŸ† ğŸ¥‡ ğŸ¥ˆ ğŸ¥‰ ğŸ… ğŸ– ğŸµ ğŸ— ğŸ« ğŸŸ
                    </div>
                </div>

                <!-- Template Picker -->
                <div id="templatePicker" class="template-picker" style="display: none;">
                    <div class="template-header">Select Template</div>
                    <div id="templateList" class="template-list"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script src="js/dashboard.js"></script>
    <!-- Inline QR replaces modal -->
</body>

</html>
